#!/bin/sh

warn () { echo "$1" >/dev/stderr; }
err () { echo "$1" >/dev/stderr; exit 1; }
arg () { test "x$2" != "x" && echo "$2" || err "Missing argument for \`$1'!"; }

prefix="/usr/local";		# default prefix

while test $# '>' 0; do
    case "$1" in
	--prefix) shift; prefix="$(arg prefix "$1")"; shift;;
	*) warn "Ignoring argument \`$1'!"; shift;;
    esac;
done;

cat Makefile.config.opam - > Makefile.config <<EOF
APRON_PREFIX = ${prefix}
EOF
